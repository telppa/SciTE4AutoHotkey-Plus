# AutoHotkey command definitions for SciTE
#
# Do NOT edit this file!
# If there is someting here you want to change, go to Options > Open User properties,
# copy the setting there and change it. If you instead want to delete a setting, just
# write an analogous line in the User properties that sets it to blank.
#

# Contextual menu
user.context.menu=||\
Open #Include|1121|\
Add scriptlet...|1122|\
Run selection|1123|\
||\
Inspect variable...|1126|

# Subsystem for debug command
command.build.subsystem.$(file.patterns.ahk)=2

# Subsystem for help command
command.help.subsystem.$(file.patterns.ahk)=4

# ShellExecute/non-stream-capturing run command
command.name.1.$(file.patterns.ahk)=Quick run
command.1.$(file.patterns.ahk)="$(AutoHotkey)" "$(FilePath)" $(1) $(2) $(3) $(4)
command.shortcut.1.$(file.patterns.ahk)=Ctrl+Shift+F5
command.mode.1.$(file.patterns.ahk)=subsystem:shellexec

# Debugger attaching command
command.name.2.*=Debug a currently running script...
command.2.*="$(LocalAHK)" /ErrorStdOut "$(SciteDefaultHome)\tools\SciTEDebug.ahk" /attach
command.shortcut.2.*=Ctrl+Shift+F7
command.mode.2.*=subsystem:shellexec

### Commands not in the Tools menu (mostly internal stuff) ###

# (Context menu) Open Include
command.mode.21.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.21.$(file.patterns.ahk)=OpenInclude

# (Context menu) Add scriptlet
command.mode.22.*=subsystem:shellexec,savebefore:no
command.22.*="$(LocalAHK)" "$(SciteDefaultHome)\tools\SUtility.ahk" /addScriptlet

# (Context menu) Run selection
command.mode.23.*=subsystem:console,savebefore:no,quiet:yes
command.23.*="$(AutoHotkey)" /CP65001 *
command.input.23.*=$(CurrentSelection)

# (Internal) Connect debugger
command.mode.24.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.24.$(file.patterns.ahk)=DBGp_Connect

# (Internal) Disconnect debugger
command.mode.25.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.25.$(file.patterns.ahk)=DBGp_Disconnect

# (Context menu) Inspect variable
command.mode.26.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.26.$(file.patterns.ahk)=DBGp_Inspect

# (Internal) Run
command.mode.27.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.27.$(file.patterns.ahk)=DBGp_Run

# (Internal) Stop
command.mode.28.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.28.$(file.patterns.ahk)=DBGp_Stop

# (Internal) Step into
command.mode.29.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.29.$(file.patterns.ahk)=DBGp_StepInto

# (Internal) Step over
command.mode.30.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.30.$(file.patterns.ahk)=DBGp_StepOver

# (Internal) Step out
command.mode.31.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.31.$(file.patterns.ahk)=DBGp_StepOut

# (Internal) Stacktrace
command.mode.32.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.32.$(file.patterns.ahk)=DBGp_Stacktrace

# (Internal) Varlist
command.mode.33.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.33.$(file.patterns.ahk)=DBGp_Varlist

# (Internal) Get director HWND
command.mode.34.*=subsystem:immediate,savebefore:no
command.34.*=get_director_HWND

# (Internal) Reset breakpoints
command.mode.35.*=subsystem:immediate,savebefore:no
command.35.*=DBGp_BkReset

# (Internal) Pause script
command.mode.36.$(file.patterns.ahk)=subsystem:immediate,savebefore:no
command.36.$(file.patterns.ahk)=DBGp_Pause

# 以下是 SciTE4AutoHotkey-Plus 的设置

# 给右键菜单添加对应功能，将 “command.name.数字.*” 中的数字加1100即可
# 最大支持0-49，也就是1100-1149。因为原版 command 命令就只支持0-49共50个。
# 也可以将数字换成这里的功能 https://www.scintilla.org/CommandValues.html
user.context.menu=\
多开|1139|\
||\
打开 文件所在目录	(Ctrl+2)|1110|\
打开 #Include 文件|1121|\
||\
运行选区代码	(Ctrl+3)|1123|\
添加到代码片段...|1122|\
||\
跳至定义	(Alt+Enter)|1138|\
检查变量(调试模式下)...|1126|

# 两处翻译
command.name.1.$(file.patterns.ahk)=快速运行
command.name.2.*=调试一个运行中的脚本...

# Open containing folder
# 打开 文件所在目录
; name 设为空，就可以不在 菜单栏——工具 中显示
command.name.10.*=
# mode 的选项以逗号分隔，如果 mode 中的选项存在单独设置 
# 例如 command.subsystem.10.*=5 那么这个值将覆盖 mode 里的 subsystem 设置
command.mode.10.*=subsystem:shellexec,savebefore:no
command.10.*="$(LocalAHK)" "$(SciteDefaultHome)\tools\右键菜单\SelectFileInExplorer.ahk" "$(FilePath)"

# SciTE4AutoHotkey settings
command.name.11.*=设置 SciTE4AutoHotkey...
command.mode.11.*=subsystem:shellexec,savebefore:no
command.11.*="$(LocalAHK)" /ErrorStdOut "$(SciteDefaultHome)\tools\PropEdit.ahk"
# SciTE4AutoHotkey diag util
command.name.12.*=诊断 SciTE4AutoHotkey...
command.mode.12.*=subsystem:shellexec,savebefore:no
command.12.*="$(LocalAHK)" /ErrorStdOut "$(SciteDefaultHome)\tools\SciTEDiag.ahk"

# (Context menu) Run selection
command.mode.23.*=subsystem:console,savebefore:no,quiet:yes
# $(LocalAHK) 是 u32 $(AutoHotkey) 是 SciTE 中当前选中生效的版本
command.23.*="$(AutoHotkey)" /CP65001 *
# 只有 subsystem:console 支持通过 pipe 传输文本。但 console 下又不支持 lua 。
# 所以没法判断取到的文本是否为空，所以取到文本为空时有运行的话，ahk就会卡住，只能退出再来。
command.input.23.*=$(CurrentSelection)

# 跳到新行
command.mode.37.*=subsystem:immediate,savebefore:no
command.37.*=MoveToNewLine

# 跳到定义
command.mode.38.*=subsystem:shellexec,savebefore:no
command.38.*="$(LocalAHK)" "$(SciteDefaultHome)\tools\右键菜单\GotoDefine.ahk"

# 多开
command.mode.39.*=subsystem:shellexec,savebefore:no
command.39.*="$(LocalAHK)" "$(SciteDefaultHome)\tools\右键菜单\OpenInAnotherInstance.ahk" "$(FilePath)"

# 名字（仅在 lua 扩展名下生效）
command.name.40.$(file.patterns.lua)=运行 Lua
# 模式 运行前会先保存
command.mode.40.*=savebefore:yes
# 3代表 Lua 扩展
command.subsystem.40.*=3
# 命令具体做啥
# 这里也可以直接调用加载的函数，例如调用调试功能 command.40.*=DBGp_Run
command.40.*=dofile $(FilePath)
# 快捷键
command.shortcut.40.*=F10

# 菜单栏 - 选项 - 打开 用户缩略语定义文件
command.mode.41.*=subsystem:immediate,savebefore:no
command.41.*=OpenUserAhkAbbrevsFile

# 菜单栏 - 技巧 - 使用技巧
command.mode.42.*=subsystem:shellexec,savebefore:no
command.42.*="$(SciteDefaultHome)\技巧\技巧说明.html"

# 菜单栏 - 技巧 - 快捷键列表
command.mode.43.*=subsystem:shellexec,savebefore:no
command.43.*="$(SciteDefaultHome)\技巧\快捷键列表.txt"
